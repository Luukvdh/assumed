"use strict";var assertroute=(()=>{var E=Object.defineProperty;var q=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var L=(n,t)=>{for(var e in t)E(n,e,{get:t[e],enumerable:!0})},F=(n,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of H(t))!M.call(n,o)&&o!==e&&E(n,o,{get:()=>t[o],enumerable:!(s=q(t,o))||s.enumerable});return n};var P=n=>F(E({},"__esModule",{value:!0}),n);var St={};L(St,{AssertError:()=>x,assert:()=>r,assertAllKeysFalsy:()=>Ln,assertAllKeysSet:()=>Fn,assertAnyKeyNull:()=>Pn,assertArray:()=>u,assertArrayEveryIsFalsy:()=>Dn,assertArrayEveryIsTruthy:()=>In,assertArrayHasAnyOf:()=>bn,assertArrayHasEveryOf:()=>Tn,assertArrayIncludesCondition:()=>Kn,assertArrayIncludesNumber:()=>Nn,assertArrayIncludesObject:()=>On,assertArrayIncludesString:()=>Sn,assertArrayItemIsBoolean:()=>mn,assertArrayItemIsNumber:()=>An,assertArrayItemIsObject:()=>$n,assertArrayItemIsString:()=>hn,assertArrayLength:()=>kn,assertArrayNotEmpty:()=>v,assertArrayOnlyHasNumbers:()=>jn,assertArrayOnlyHasObjects:()=>Rn,assertArrayOnlyHasStrings:()=>vn,assertBoolean:()=>R,assertDate:()=>y,assertDateBetween:()=>Un,assertDateEarlier:()=>Yn,assertDateLater:()=>Zn,assertDateYear:()=>_n,assertDeepEquals:()=>Et,assertDefined:()=>B,assertElement:()=>l,assertElementAttributeEquals:()=>Gn,assertElementHasAttribute:()=>zn,assertElementHasChild:()=>Jn,assertElementHasChildMatching:()=>Wn,assertElementHasChildren:()=>Bn,assertElementHasDescendant:()=>Vn,assertEquals:()=>gt,assertFalse:()=>Xn,assertHasKey:()=>Cn,assertHasKeys:()=>qn,assertHasPath:()=>bt,assertInstanceOf:()=>V,assertIsArrayNotEmpty:()=>lt,assertIsNegative:()=>ct,assertIsNotZero:()=>at,assertIsPositive:()=>ut,assertKeyEquals:()=>Hn,assertMapHasKey:()=>Tt,assertMatchesSchema:()=>ht,assertNonEmptyRecord:()=>wt,assertNonEmptyString:()=>X,assertNonNull:()=>J,assertNotEquals:()=>ft,assertNull:()=>nt,assertNumber:()=>p,assertNumberApproxEquals:()=>it,assertNumberBetween:()=>wn,assertNumberGreaterOrEqual:()=>gn,assertNumberGreaterThan:()=>yn,assertNumberInteger:()=>st,assertNumberLessOrEqual:()=>En,assertNumberLessThan:()=>fn,assertNumberNegative:()=>K,assertNumberNonNegative:()=>et,assertNumberNonPositive:()=>rt,assertNumberNotZero:()=>D,assertNumberPositive:()=>I,assertNumberSafeInteger:()=>ot,assertObject:()=>d,assertObjectArrayAllHaveKey:()=>pt,assertObjectArrayEveryHasKeys:()=>dt,assertOnFail:()=>C,assertOneOfPrimitive:()=>xt,assertPresent:()=>W,assertRoute:()=>w,assertSameKeys:()=>Mn,assertSetHasValue:()=>mt,assertString:()=>c,assertStringContains:()=>sn,assertStringContainsCanonical:()=>$t,assertStringEndsWith:()=>an,assertStringEqualsCanonical:()=>At,assertStringEqualsIgnoreCase:()=>cn,assertStringIncludesAll:()=>dn,assertStringIncludesAny:()=>pn,assertStringIsJSON:()=>xn,assertStringLength:()=>nn,assertStringLengthAtLeast:()=>tn,assertStringLengthAtMost:()=>en,assertStringLengthBetween:()=>rn,assertStringMatches:()=>un,assertStringStartsWith:()=>on,assertStringTrimmedNotEmpty:()=>ln,assertSubset:()=>kt,assertTrue:()=>Qn,assertUndefined:()=>tt,expectArray:()=>Z,expectBoolean:()=>Y,expectDate:()=>_,expectNumber:()=>G,expectObject:()=>U,expectString:()=>z,isArray:()=>m,isBoolean:()=>T,isDate:()=>A,isDefined:()=>$,isElement:()=>j,isInstanceOf:()=>O,isNonNull:()=>S,isNumber:()=>b,isObject:()=>h,isPresent:()=>N,isString:()=>k,onFail:()=>yt,routeWith:()=>Q});var x=class extends Error{code="ASSERT_FAILED";info;constructor(t,e){super(t),this.name="AssertError",this.info=e}};function r(n,t="Assertion failed",e){if(!n)throw new x(t,e)}function k(n){return typeof n=="string"}function b(n){return typeof n=="number"&&Number.isFinite(n)}function T(n){return typeof n=="boolean"}function m(n){return Array.isArray(n)}function h(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function A(n){return n instanceof Date&&!Number.isNaN(n.getTime?.())}function $(n){return n!==void 0}function S(n){return n!==null}function N(n){return n!=null}function O(n,t){return typeof t=="function"&&n instanceof t}function c(n,t="Expected string",e){r(k(n),t,{...e,got:typeof n})}function p(n,t="Expected number",e){r(b(n),t,{...e,got:typeof n})}function R(n,t="Expected boolean",e){r(T(n),t,{...e,got:typeof n})}function u(n,t="Expected array",e){r(m(n),t,{...e,got:Array.isArray(n)?"array":typeof n})}function d(n,t="Expected object",e){r(h(n),t,{...e,got:Array.isArray(n)?"array":n===null?"null":typeof n})}function y(n,t="Expected Date",e){r(A(n),t,{...e,got:typeof n})}function B(n,t="Expected defined",e){r($(n),t,e)}function J(n,t="Expected non-null",e){r(S(n),t,e)}function W(n,t="Expected value present",e){r(N(n),t,e)}function V(n,t,e,s){r(O(n,t),e??`Expected instance of ${t?.name??"<ctor>"}`,{...s,got:n?.constructor?.name??typeof n})}function z(n,t){return c(n,t),n}function G(n,t){return p(n,t),n}function Y(n,t){return R(n,t),n}function Z(n,t){return u(n,t),n}function U(n,t){return d(n,t),n}function _(n,t){return y(n,t),n}function w(n,t,e={}){let{onError:s,catchNonAssertErrors:o=!1}=e;try{return n()}catch(i){if(i instanceof x)return s?.(i),t;if(o){let a=i instanceof Error?i:new Error(String(i));return s?.(new x(a.message,{cause:a})),t}throw i}}function Q(n,t){return e=>w(e,n,t)}function X(n,t="Expected non-empty string"){c(n,t),r(n.length>0,t)}function v(n,t="Expected non-empty array"){u(n,t),r(n.length>0,t)}function nn(n,t,e){c(n,e??`Expected string length ${t}`),r(n.length===t,e??`Expected string length ${t}`)}function tn(n,t,e){c(n,e??`Expected string length >= ${t}`),r(n.length>=t,e??`Expected string length >= ${t}`)}function en(n,t,e){c(n,e??`Expected string length <= ${t}`),r(n.length<=t,e??`Expected string length <= ${t}`)}function rn(n,t,e,s){c(n,s??`Expected string length between ${t} and ${e}`);let o=n.length;r(o>=t&&o<=e,s??`Expected string length between ${t} and ${e}`)}function sn(n,t,e){c(n,e??`Expected string to contain ${String(t)}`);let s=n,o=typeof t=="string"?s.includes(t):t.test(s);r(o,e??`Expected string to contain ${String(t)}`)}function on(n,t,e){c(n,e??`Expected string to start with "${t}"`),r(n.startsWith(t),e??`Expected string to start with "${t}"`)}function an(n,t,e){c(n,e??`Expected string to end with "${t}"`),r(n.endsWith(t),e??`Expected string to end with "${t}"`)}function un(n,t,e){c(n,e??`Expected string to match ${t}`),r(t.test(n),e??`Expected string to match ${t}`)}function cn(n,t,e){c(n,e??`Expected "${t}" (case-insensitive)`),r(n.toLowerCase()===t.toLowerCase(),e??`Expected "${t}" (case-insensitive)`)}function pn(n,...t){c(n,"Expected string");let e=n;r(t.some(s=>e.includes(s)),`Expected string to include any of [${t.join(", ")}]`)}function dn(n,...t){c(n,"Expected string");let e=n;r(t.every(s=>e.includes(s)),`Expected string to include all of [${t.join(", ")}]`)}function xn(n,t="Expected valid JSON"){c(n,t);try{JSON.parse(n)}catch{r(!1,t)}}function ln(n,t="Expected non-empty (trimmed)"){c(n,t),r(n.trim().length>0,t)}function yn(n,t,e){p(n,e??`Expected > ${t}`),r(n>t,e??`Expected > ${t}`)}function gn(n,t,e){p(n,e??`Expected >= ${t}`),r(n>=t,e??`Expected >= ${t}`)}function fn(n,t,e){p(n,e??`Expected < ${t}`),r(n<t,e??`Expected < ${t}`)}function En(n,t,e){p(n,e??`Expected <= ${t}`),r(n<=t,e??`Expected <= ${t}`)}function wn(n,t,e,s){p(n,s??`Expected between ${t} and ${e}`);let o=n;r(o>=t&&o<=e,s??`Expected between ${t} and ${e}`)}function kn(n,t,e){u(n,e??`Expected array length ${t}`),r(n.length===t,e??`Expected array length ${t}`)}function bn(n,t,e){u(n,e??"Expected array");let s=n,o=new Set(t),i=s.some(a=>o.has(String(a))||o.has(a));r(i,e??`Expected array to contain any of [${t.join(", ")}]`)}function Tn(n,t,e){u(n,e??"Expected array");let s=n,o=new Set(s.map(a=>typeof a=="string"?a:String(a))),i=t.filter(a=>!o.has(a));r(i.length===0,e??`Missing required items: [${i.join(", ")}]`)}function mn(n,t,e){u(n,e??"Expected array"),r(typeof n[t]=="boolean",e??`Expected boolean at ${t}`)}function hn(n,t,e){u(n,e??"Expected array"),r(typeof n[t]=="string",e??`Expected string at ${t}`)}function An(n,t,e){u(n,e??"Expected array"),r(typeof n[t]=="number",e??`Expected number at ${t}`)}function $n(n,t,e){u(n,e??"Expected array");let s=n[t];r(typeof s=="object"&&s!==null&&!Array.isArray(s),e??`Expected object at ${t}`)}function Sn(n,t,e){u(n,e??"Expected array"),r(n.some(s=>String(s).includes(t)),e??`Expected array to include string containing "${t}"`)}function Nn(n,t,e){u(n,e??"Expected array"),r(n.some(s=>s===t),e??`Expected array to include number ${t}`)}function On(n,t,e){u(n,e??"Expected array");let s=JSON.stringify(t);r(n.some(o=>JSON.stringify(o)===s),e??`Expected array to include object ${s}`)}function Rn(n,t){u(n,t??"Expected array"),r(n.every(e=>typeof e=="object"&&e!==null&&!Array.isArray(e)),t??"Expected array to only contain objects")}function vn(n,t){u(n,t??"Expected array"),r(n.every(e=>typeof e=="string"),t??"Expected array to only contain strings")}function jn(n,t){u(n,t??"Expected array"),r(n.every(e=>typeof e=="number"),t??"Expected array to only contain numbers")}function Dn(n,t){u(n,t??"Expected array"),r(n.every(e=>!e),t??"Expected every item to be falsy")}function In(n,t){u(n,t??"Expected array"),r(n.every(e=>!!e),t??"Expected every item to be truthy")}function Kn(n,t,e){u(n,e??"Expected array"),r(n.some(t),e??"Expected array to include an item matching condition")}function Cn(n,t,e){d(n,e??"Expected object"),r(t in n,e??`Expected key "${t}"`)}function qn(n,...t){d(n,"Expected object");let e=n;r(t.every(s=>s in e),`Expected keys: ${t.join(", ")}`)}function Hn(n,t,e,s){d(n,s??"Expected object"),r(n[t]===e,s??`Expected key "${String(t)}" to equal ${JSON.stringify(e)}`)}function Mn(n,t,e){d(n,e??"Expected object");let s=Object.keys(n).sort(),o=Object.keys(t).sort();r(s.length===o.length&&s.every((i,a)=>i===o[a]),e??"Expected same keys")}function Ln(n,t){d(n,t??"Expected object"),r(Object.values(n).every(e=>!e),t??"Expected all keys to be falsy")}function Fn(n,t){d(n,t??"Expected object");let e=Object.values(n);r(e.every(s=>s!=null),t??"Expected all keys to be set (not null/undefined)")}function Pn(n,t){d(n,t??"Expected object");let e=Object.values(n);r(e.some(s=>s===null),t??"Expected any key to be null")}function j(n){return typeof Element<"u"&&n instanceof Element}function l(n,t="Expected Element"){r(j(n),t)}function Bn(n,t="Expected element to have children"){l(n,t);let e=n,s=e.children?.length??e.childNodes?.length??0;r(s>0,t)}function Jn(n,t="Expected element to have a child"){l(n,t),r(n.children?.length>0,t)}function Wn(n,t,e){l(n,e??"Expected element");let s=n,o=Array.from(s.children??[]);r(o.some(i=>i.matches?.(t)),e??`Expected child matching "${t}"`)}function Vn(n,t,e){l(n,e??"Expected element");let o=n.querySelector?.(t);r(!!o,e??`Expected descendant matching "${t}"`)}function zn(n,t,e){l(n,e??"Expected element");let o=n.hasAttribute?.(t);r(!!o,e??`Expected element to have attribute "${t}"`)}function Gn(n,t,e,s){l(n,s??"Expected element");let i=n.getAttribute?.(t);r(i===e,s??`Expected attribute "${t}" to equal "${e}"`)}function Yn(n,t,e){y(n,e??"Expected Date"),r(n.getTime()<t.getTime(),e??`Expected date earlier than ${t.toISOString?.()??t}`)}function Zn(n,t,e){y(n,e??"Expected Date"),r(n.getTime()>t.getTime(),e??`Expected date later than ${t.toISOString?.()??t}`)}function Un(n,t,e,s){y(n,s??"Expected Date");let o=n.getTime();r(o>=t.getTime()&&o<=e.getTime(),s??`Expected date between ${t.toISOString?.()??t} and ${e.toISOString?.()??e}`)}function _n(n,t,e){y(n,e??"Expected Date"),r(n.getFullYear()===t,e??`Expected year ${t}`)}function Qn(n,t="Expected true"){r(n===!0,t)}function Xn(n,t="Expected false"){r(n===!1,t)}function nt(n,t="Expected null"){r(n===null,t)}function tt(n,t="Expected undefined"){r(n===void 0,t)}function D(n,t="Expected non-zero number"){p(n,t),r(n!==0,t)}function I(n,t="Expected positive number"){p(n,t),r(n>0,t)}function et(n,t="Expected non-negative number"){p(n,t),r(n>=0,t)}function K(n,t="Expected negative number"){p(n,t),r(n<0,t)}function rt(n,t="Expected non-positive number"){p(n,t),r(n<=0,t)}function st(n,t="Expected integer"){p(n,t),r(Number.isInteger(n),t)}function ot(n,t="Expected safe integer"){p(n,t),r(Number.isSafeInteger(n),t)}function it(n,t,e=1e-9,s){p(n,s??`Expected approximately ${t} \xB1 ${e}`),r(Math.abs(n-t)<=e,s??`Expected approximately ${t} \xB1 ${e}`)}var at=D,ut=I,ct=K;function pt(n,t,e){u(n,e??"Expected array"),r(n.every(s=>typeof s=="object"&&s!==null&&!Array.isArray(s)&&t in s),e??`Expected every object in array to have key "${t}"`)}function dt(n,...t){u(n,"Expected array"),r(n.every(e=>{if(!(typeof e=="object"&&e!==null&&!Array.isArray(e)))return!1;let s=e;return t.every(o=>o in s)}),`Expected every object in array to have keys: ${t.join(", ")}`)}function xt(n,t,e){r(t.includes(n),e??`Expected one of [${t.join(", ")}]`)}var lt=v;function C(n,t,e={}){let{catchNonAssertErrors:s=!1}=e;try{return n()}catch(o){if(o instanceof x)return t(o);if(s){let i=o instanceof Error?o:new Error(String(o));return t(new x(i.message,{cause:i}))}throw o}}function yt(n){return{return:(t,e)=>w(n,t,{catchNonAssertErrors:e?.catchNonAssertErrors}),run:(t,e)=>C(n,t,e)}}function g(n,t){if(n===t)return!0;if(n&&t&&typeof n=="object"&&typeof t=="object"){if(n instanceof Date||t instanceof Date)return n instanceof Date&&t instanceof Date?n.getTime()===t.getTime():!1;if(Array.isArray(n)||Array.isArray(t)){if(!(Array.isArray(n)&&Array.isArray(t))||n.length!==t.length)return!1;for(let o=0;o<n.length;o++)if(!g(n[o],t[o]))return!1;return!0}let e=Object.keys(n),s=Object.keys(t);if(e.length!==s.length)return!1;for(let o of e)if(!Object.prototype.hasOwnProperty.call(t,o)||!g(n[o],t[o]))return!1;return!0}return Number.isNaN(n)&&Number.isNaN(t)}function gt(n,t,e){r(n===t,e??`Expected ${JSON.stringify(n)} === ${JSON.stringify(t)}`)}function ft(n,t,e){r(n!==t,e??"Expected values to differ")}function Et(n,t,e){r(g(n,t),e??"Expected deep equality")}function wt(n,t="Expected non-empty object"){d(n,t),r(Object.keys(n).length>0,t)}function kt(n,t,e){d(n,e??"Expected object");let s=n;for(let[o,i]of Object.entries(t))r(o in s,e??`Missing key: ${o}`),r(g(s[o],i),e??`Mismatched value at key: ${o}`)}function bt(n,t,e){d(n,e??"Expected object");let s=Array.isArray(t)?t:t.split(".").filter(Boolean),o=n;for(let i of s){let a=i;(o==null||!(a in o))&&r(!1,e??`Missing path: ${s.join(".")}`),o=o[a]}}function Tt(n,t,e){r(n instanceof Map,e??"Expected Map"),r(n.has(t),e??"Expected Map to have key")}function mt(n,t,e){r(n instanceof Set,e??"Expected Set"),r(n.has(t),e??"Expected Set to contain value")}function ht(n,t,e){d(n,e??"Expected object");let s=n;for(let[o,i]of Object.entries(t)){let a=s[o];if(typeof i=="function")r(i(a),e??`Schema predicate failed at ${o}`);else switch(i){case"string":r(typeof a=="string",e??`Expected ${o} to be string`);break;case"number":r(typeof a=="number"&&Number.isFinite(a),e??`Expected ${o} to be number`);break;case"boolean":r(typeof a=="boolean",e??`Expected ${o} to be boolean`);break;case"object":r(typeof a=="object"&&a!==null&&!Array.isArray(a),e??`Expected ${o} to be object`);break;case"array":r(Array.isArray(a),e??`Expected ${o} to be array`);break;case"date":r(a instanceof Date&&!Number.isNaN(a.getTime?.()),e??`Expected ${o} to be Date`);break}}}function f(n){return n.toLowerCase().replace(/\s+/g,"")}function At(n,t,e){c(n,e??"Expected string");let s=f(n),o=f(t);r(s===o,e??"Expected canonical equality")}function $t(n,t,e){c(n,e??"Expected string");let s=f(n),o=f(t);r(s.includes(o),e??"Expected canonical containment")}return P(St);})();
